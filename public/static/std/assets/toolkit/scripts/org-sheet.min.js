const cmpSheet={name:"cmpSheet",sheetOpen:false,selector:".cmp-sheet",bodyElement:document.querySelector("body"),openButtonElements:document.querySelectorAll('[data-function="openSheet"]'),prevScrollPos:0,init:function(){for(let openButtonElement of this.openButtonElements){openButtonElement.addEventListener("click",cmpSheet.openSheet,false)}},openSheet:function(event){event.preventDefault();cmpSheet.sheetElement=event.target.parentElement.parentElement.querySelector(".cmp-sheet");cmpSheet.overlayElement=cmpSheet.sheetElement.querySelector(".cmp-sheet__overlay");cmpSheet.contentElement=cmpSheet.sheetElement.querySelector(".cmp-sheet__content");cmpSheet.closeButtonElement=cmpSheet.sheetElement.querySelector(".sh-atom-button--close");cmpSheet.contentTouchElement=cmpSheet.sheetElement.querySelector(".cmp-sheet__content-header-touch-target");cmpSheet.sheetOpen=true;cmpSheet.bodyElement.style.overflow="hidden";cmpSheet.sheetElement.style.display="flex";cmpSheet.bodyElement.style.touchAction="none";setTimeout(cmpSheet.overlayOpen,2);setTimeout(cmpSheet.slideUpToHalfScreen,4);cmpSheet.closeButtonElement.addEventListener("click",cmpSheet.closeButtonHandler,false);cmpSheet.overlayElement.addEventListener("click",cmpSheet.closeSheetOnBlur,false);cmpSheet.contentTouchElement.addEventListener("touchstart",cmpSheet.touchStart,{passive:true});cmpSheet.contentTouchElement.addEventListener("touchmove",cmpSheet.touchMoveHandler,{passive:true});cmpSheet.contentTouchElement.addEventListener("touchend",cmpSheet.touchEnd,{passive:false})},closeSheet:function(){cmpSheet.contentElement.classList.remove("cmp-sheet__content--half-screen");cmpSheet.contentElement.classList.remove("cmp-sheet__content--fullscreen");function restoreDoc(){cmpSheet.sheetElement.style.display="none";cmpSheet.bodyElement.style.removeProperty("overflow");cmpSheet.bodyElement.style.removeProperty("touchAction");cmpSheet.sheetOpen=false}setTimeout(cmpSheet.overlayClose,400);setTimeout(restoreDoc,600);cmpSheet.closeButtonElement.removeEventListener("click",cmpSheet.closeButtonHandler,false);cmpSheet.overlayElement.removeEventListener("click",cmpSheet.closeSheetOnBlur,false);cmpSheet.contentTouchElement.removeEventListener("touchstart",cmpSheet.touchStart);cmpSheet.contentTouchElement.removeEventListener("touchmove",cmpSheet.touchMoveHandler);cmpSheet.contentTouchElement.removeEventListener("touchend",cmpSheet.touchEnd)},closeSheetOnBlur:function(event){if(event.target===event.currentTarget&&cmpSheet.sheetOpen===true){cmpSheet.slideDownToBottom()}},closeButtonHandler(){cmpSheet.overlayElement.removeEventListener("click",cmpSheet.closeSheetOnBlur,false);cmpSheet.contentTouchElement.removeEventListener("touchend",cmpSheet.touchEnd);cmpSheet.slideDownToBottom()},slideUpToHalfScreen:function(){cmpSheet.contentElement.style.transform="translateY(50%)";cmpSheet.contentElement.classList.add("cmp-sheet__content--half-screen")},slideDownToHalfScreen:function(){cmpSheet.contentElement.style.transform="translateY(50%)";cmpSheet.contentElement.classList.add("cmp-sheet__content--half-screen");if(cmpSheet.contentElement.classList.contains("cmp-sheet__content--fullscreen")){cmpSheet.contentElement.classList.remove("cmp-sheet__content--fullscreen")}},slideDownToBottom:function(){cmpSheet.contentElement.style.transform="translateY(100%)";setTimeout(cmpSheet.closeSheet,4)},slideUpToFullScreen:function(){cmpSheet.contentElement.style.transform="translateY(0%)";cmpSheet.contentElement.classList.add("cmp-sheet__content--fullscreen");if(cmpSheet.contentElement.classList.contains("cmp-sheet__content--half-screen")){cmpSheet.contentElement.classList.remove("cmp-sheet__content--half-screen")}},touchStart:function(event){cmpSheet.prevScrollPos=event.touches[0].clientY},touchMoveHandler:function(event){let touchstart=cmpSheet.prevScrollPos;let touchmove=event.changedTouches[0].clientY;let touchDiff=Math.abs(touchstart-touchmove);if(touchstart>touchmove){cmpSheet.slideUpToFullScreen()}else{if(cmpSheet.contentElement.classList.contains("cmp-sheet__content--fullscreen")&&touchDiff<400){cmpSheet.slideDownToHalfScreen()}else{cmpSheet.slideDownToBottom()}}},touchEnd:function(event){event.preventDefault()},overlayOpen:function(){cmpSheet.overlayElement.classList.add("overlay-open")},overlayClose:function(){cmpSheet.overlayElement.classList.remove("overlay-open")}};cmpSheet.init();